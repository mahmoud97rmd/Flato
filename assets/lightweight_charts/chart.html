<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <script src="lightweight-charts.standalone.production.js"></script>
  <style>
    html, body, #chart {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div id="chart"></div>

  <script>
    const chart = LightweightCharts.createChart(document.getElementById('chart'), {
      layout: { backgroundColor: '#ffffff', textColor: '#000000' },
      rightPriceScale: { borderColor: '#ccc' },
      timeScale: { borderColor: '#ccc' },
    });

    const candleSeries = chart.addCandlestickSeries({
      upColor: '#26a69a', downColor: '#ef5350',
      wickUpColor: '#26a69a', wickDownColor: '#ef5350',
    });

    const emaShortSeries = chart.addLineSeries({
      color: '#2962FF', lineWidth: 2
    });

    const emaLongSeries = chart.addLineSeries({
      color: '#FF6D00', lineWidth: 2
    });

    const rsiChart = LightweightCharts.createChart(document.body, {
      width: document.body.clientWidth,
      height: 150,
    });
    const rsiSeries = rsiChart.addLineSeries({ color: '#8E24AA', lineWidth: 2 });

    window.setCandles = function(data) {
      candleSeries.setData(data);
    }

    window.updateLastCandle = function(candle) {
      candleSeries.update(candle);
    }

    window.setEmaShort = function(data) {
      emaShortSeries.setData(data);
    }

    window.setEmaLong = function(data) {
      emaLongSeries.setData(data);
    }

    window.setRsi = function(data) {
      rsiSeries.setData(data);
    }
  </script>
</body>
</html>
